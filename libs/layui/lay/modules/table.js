/** layui-v2.1.5 MIT License By http://www.layui.com */
 ;layui.define(["laytpl","laypage","layer","form"],function(e){"use strict";var t=layui.$,a=layui.laytpl,i=layui.laypage,l=layui.layer,n=layui.form,o=layui.hint(),r=layui.device(),d={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var a=this;return a.config=t.extend({},a.config,e),a},on:function(e,t){return layui.onevent.call(this,s,e,t)}},c=function(){var e=this,t=e.config,a=t.id;return a&&(c.config[a]=t),{reload:function(t){e.reload.call(e,t)},config:t}},s="table",u=".layui-table",f="layui-hide",h="layui-none",y="layui-table-view",p=".layui-table-header",m=".layui-table-body",v=".layui-table-main",g=".layui-table-fixed",x=".layui-table-fixed-l",b=".layui-table-fixed-r",k=".layui-table-tool",C=".layui-table-sort",w="layui-table-edit",N="layui-table-hover",z=function(e){return e=e||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return e.fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),"{{# if(item2.checkbox){ }}",'<th data-field="{{ item2.field||i2 }}" data-type="checkbox" {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} unresize="true"><div class="layui-table-cell laytable-cell-checkbox"><input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}></div></th>',"{{# } else if(item2.space){ }}",'<th data-field="{{ item2.field||i2 }}" {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} unresize="true"><div class="layui-table-cell laytable-cell-space"></div></th>',"{{# } else { }}",'<th data-field="{{ item2.field||i2 }}" {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} {{# if(item2.unresize){ }}unresize="true"{{# } }}>',"{{# if(item2.colspan > 1){ }}",'<div class="layui-table-cell laytable-cell-group" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','<span>{{item2.title||""}}</span>',"</div>","{{# } else { }}",'<div class="layui-table-cell laytable-cell-{{d.index}}-{{item2.field||i2}}" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','<span>{{item2.title||""}}</span>',"{{# if(item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","</div>","{{# } }}","</th>","{{# }; }}",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},F=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),H=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# var left, right; }}",'<div class="layui-table-header">',z(),"</div>",'<div class="layui-table-body layui-table-main">',F,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',z({fixed:!0}),"</div>",'<div class="layui-table-body">',F,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',z({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',F,"</div>","</div>","{{# }; }}","{{# if(d.data.page){ }}",'<div class="layui-table-tool">','<div class="layui-inline layui-table-page" id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ width:{{item2.width||50}}px }","{{# });","}); }}","</style>","</div>"].join(""),T=t(window),L=t(document),S=function(e){var a=this;a.index=++d.index,a.config=t.extend({},a.config,d.config,e),a.render()};S.prototype.config={limit:30,loading:!0},S.prototype.render=function(e){var i,l=this;if(e&&(l.config=e),i=l.config,i.elem=t(i.elem),i.where=i.where||{},i.request=t.extend({pageName:i.pageName||"page",limitName:i.limitName||"limit"},i.request),i.response=t.extend({statusName:i.statusName||"code",statusCode:0,msgName:i.msgName||"msg",dataName:i.dataName||"data",countName:i.countName||"count"},i.response),!i.elem[0])return l;var n=i.elem,o=n.next("."+y);i.height&&/^full-\d+$/.test(i.height)&&(l.fullHeightGap=i.height.split("-")[1],i.height=T.height()-l.fullHeightGap);var r=l.elem=t(a(H).render({VIEW_CLASS:y,data:i,index:l.index}));if(i.index=l.index,o[0]&&o.remove(),n.after(r),l.layHeader=r.find(p),l.layMain=r.find(v),l.layBody=r.find(m),l.layFixed=r.find(g),l.layFixLeft=r.find(x),l.layFixRight=r.find(b),l.layTool=r.find(k),i.height&&l.fullSize(),i.cols.length>1){var d=l.layFixed.find(p).find("th");d.height(l.layHeader.height()-1-parseFloat(d.css("padding-top"))-parseFloat(d.css("padding-bottom")))}l.pullData(1,l.loading()),l.events()},S.prototype.reload=function(e){var a=this;a.config=t.extend({},a.config,e),a.render()},S.prototype.pullData=function(e,a){var i=this,n=i.config,o=n.request,r=n.response,d=function(){"object"==typeof n.initSort&&i.sort(n.initSort.field,n.initSort.type)};if(n.url){var c={};c[o.pageName]=e,c[o.limitName]=n.limit,t.ajax({type:n.method||"get",url:n.url,data:t.extend(c,n.where),dataType:"json",cache:!1,success:function(t){return t[r.statusName]!=r.statusCode?(i.renderForm(),i.layMain.html('<div class="'+h+'">'+(t[r.msgName]||"返回的数据状态异常")+"</div>")):(n.responseHandle&&(t=n.responseHandle(t,e,n.limit)),i.renderData(t,e,t[r.countName]),d(),a&&l.close(a),void("function"==typeof n.done&&n.done(t,e,t[r.countName])))},error:function(e,t){i.layMain.html('<div class="'+h+'">数据接口请求异常</div>'),i.renderForm(),a&&l.close(a)}})}else if(n.data&&n.data.constructor===Array){var s={},u=e*n.limit-n.limit;s[r.dataName]=n.data.concat().splice(u,n.limit),s[r.countName]=n.data.length,i.renderData(s,e,n.data.length),d(),"function"==typeof n.done&&n.done(s,e,s[r.countName])}!n.url&&a&&l.close(a)},S.prototype.page=1,S.prototype.eachCols=function(e){var a=t.extend(!0,[],this.config.cols),i=[],l=0;layui.each(a,function(e,t){layui.each(t,function(t,n){if(n.colspan>1){var o=0;l++,n.CHILD_COLS=[],layui.each(a[e+1],function(e,t){t.PARENT_COL||o==n.colspan||(t.PARENT_COL=l,n.CHILD_COLS.push(t),o+=t.colspan>1?t.colspan:1)})}n.PARENT_COL||i.push(n)})});var n=function(t){layui.each(t||i,function(t,a){return a.CHILD_COLS?n(a.CHILD_COLS):void e(t,a)})};n()},S.prototype.renderData=function(e,n,o,r){var c=this,s=c.config,u=e[s.response.dataName]||[],f=[],y=[],p=[],m=function(){return!r&&c.sortKey?c.sort(c.sortKey.field,c.sortKey.sort,!0):(layui.each(u,function(e,i){var l=[],n=[],o=[];0!==i.length&&(r||(i[d.config.indexName]=e),c.eachCols(function(e,r){var c=i[r.field||e];if(void 0!==c&&null!==c||(c=""),!(r.colspan>1)){var u=['<td data-field="'+(r.field||e)+'"'+function(){var e=[];return r.edit&&e.push(' data-edit="true"'),r.align&&e.push(' align="'+r.align+'"'),r.templet&&e.push(' data-content="'+c+'"'),r.toolbar&&e.push(' data-off="true"'),r.event&&e.push(' lay-event="'+r.event+'"'),r.style&&e.push(' style="'+r.style+'"'),e.join("")}()+">",'<div class="layui-table-cell laytable-cell-'+function(){return r.checkbox?"checkbox":r.space?"space":s.index+"-"+(r.field||e)}()+'">'+function(){return r.checkbox?'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){var e=d.config.checkName;return r[e]?(i[e]=r[e],r[e]?"checked":""):i[e]?"checked":""}()+">":r.toolbar?a(t(r.toolbar).html()||"").render(i):r.templet?a(t(r.templet).html()||String(c)).render(i):c}(),"</div></td>"].join("");l.push(u),r.fixed&&"right"!==r.fixed&&n.push(u),"right"===r.fixed&&o.push(u)}}),f.push('<tr data-index="'+e+'">'+l.join("")+"</tr>"),y.push('<tr data-index="'+e+'">'+n.join("")+"</tr>"),p.push('<tr data-index="'+e+'">'+o.join("")+"</tr>"))}),c.layBody.scrollTop(0),c.layMain.find("."+h).remove(),c.layMain.find("tbody").html(f.join("")),c.layFixLeft.find("tbody").html(y.join("")),c.layFixRight.find("tbody").html(p.join("")),c.renderForm(),c.syncCheckAll(),c.haveInit?c.scrollPatch():setTimeout(function(){c.scrollPatch()},50),c.haveInit=!0,void l.close(c.tipsIndex))};return c.key=s.id||s.index,d.cache[c.key]=u,r?m():0===u.length?(c.renderForm(),c.layFixed.remove(),c.layMain.find("tbody").html(""),c.layMain.find("."+h).remove(),c.layMain.append('<div class="'+h+'">没有符合条件的结果</div>')):(m(),void(s.page&&(c.page=n,c.count=o,i.render({elem:"layui-table-page"+s.index,count:o,groups:3,limits:s.limits||[10,20,30,40,50,60,70,80,90],limit:s.limit,curr:n,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(c.page=e.curr,s.limit=e.limit,c.pullData(e.curr,c.loading()))}}),c.layTool.find(".layui-table-count span").html(o))))},S.prototype.renderForm=function(e){n.render(e||"checkbox","LAY-table-"+this.index)},S.prototype.sort=function(e,a,i,n){var r,c,u=this,f={},h=u.config,y=h.elem.attr("lay-filter"),p=d.cache[u.key];"string"==typeof e&&u.layHeader.find("th").each(function(a,i){var l=t(this),n=l.data("field");if(n===e)return e=l,r=n,!1});try{var r=r||e.data("field");if(u.sortKey&&!i&&r===u.sortKey.field&&a===u.sortKey.sort)return;var m=u.layHeader.find("th .laytable-cell-"+h.index+"-"+r).find(C);u.layHeader.find("th").find(C).removeAttr("lay-sort"),m.attr("lay-sort",a||null),u.layFixed.find("th")}catch(v){return o.error("Table modules: Did not match to field")}u.sortKey={field:r,sort:a},"asc"===a?c=layui.sort(p,r):"desc"===a?c=layui.sort(p,r,!0):(c=layui.sort(p,d.config.indexName),delete u.sortKey),f[h.response.dataName]=c,u.renderData(f,u.page,u.count,!0),l.close(u.tipsIndex),n&&layui.event.call(e,s,"sort("+y+")",{field:r,type:a})},S.prototype.loading=function(){var e=this,t=e.config;if(t.loading&&t.url)return l.msg("数据请求中",{icon:16,offset:[e.elem.offset().top+e.elem.height()/2-35-T.scrollTop()+"px",e.elem.offset().left+e.elem.width()/2-90-T.scrollLeft()+"px"],anim:-1,fixed:!1})},S.prototype.setCheckData=function(e,t){var a=this,i=a.config,l=d.cache[a.key];l[e]&&(l[e][i.checkName]=t)},S.prototype.syncCheckAll=function(){var e=this,t=e.config,a=e.layHeader.find('input[name="layTableCheckbox"]'),i=function(a){return e.eachCols(function(e,i){i.checkbox&&(i[t.checkName]=a)}),a};a[0]&&(d.checkStatus(e.key).isAll?(a[0].checked||(a.prop("checked",!0),e.renderForm()),i(!0)):(a[0].checked&&(a.prop("checked",!1),e.renderForm()),i(!1)))},S.prototype.getCssRule=function(e,t){var a=this,i=a.elem.find("style")[0],l=i.sheet||i.styleSheet,n=l.cssRules||l.rules;layui.each(n,function(i,l){if(l.selectorText===".laytable-cell-"+a.index+"-"+e)return t(l),!0})},S.prototype.fullSize=function(){var e,t=this,a=t.config,i=a.height;t.fullHeightGap&&(i=T.height()-t.fullHeightGap,i<135&&(i=135),t.elem.css("height",i)),e=parseFloat(i)-parseFloat(t.layHeader.height())-1,a.page&&(e-=parseFloat(t.layTool.outerHeight()+1)),t.layMain.css("height",e)},S.prototype.scrollPatch=function(){var e=this,a=e.layMain.children("table"),i=e.layMain.width()-e.layMain.prop("clientWidth"),l=e.layMain.height()-e.layMain.prop("clientHeight");if(i&&l){if(!e.elem.find(".layui-table-patch")[0]){var n=t('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');n.find("div").css({width:i}),e.layHeader.eq(0).find("thead tr").append(n)}}else e.layHeader.eq(0).find(".layui-table-patch").remove();var o=e.layMain.height(),r=o-l;e.layFixed.find(m).css("height",a.height()>r?r:"auto"),e.layFixRight[a.width()>e.layMain.width()?"removeClass":"addClass"](f),e.layFixRight.css("right",i-1)},S.prototype.events=function(){var e,i=this,n=i.config,o=t("body"),c={},u=i.layHeader.find("th"),f=".layui-table-cell",h=n.elem.attr("lay-filter");u.on("mousemove",function(e){var a=t(this),i=a.offset().left,l=e.clientX-i;a.attr("colspan")>1||a.attr("unresize")||c.resizeStart||(c.allowResize=a.width()-l<=10,o.css("cursor",c.allowResize?"col-resize":""))}).on("mouseleave",function(){t(this);c.resizeStart||o.css("cursor","")}).on("mousedown",function(e){if(c.allowResize){var a=t(this).data("field");e.preventDefault(),c.resizeStart=!0,c.offset=[e.clientX,e.clientY],i.getCssRule(a,function(e){c.rule=e,c.ruleWidth=parseFloat(e.style.width)})}}),L.on("mousemove",function(t){if(c.resizeStart){if(t.preventDefault(),c.rule){var a=c.ruleWidth+t.clientX-c.offset[0];c.rule.style.width=a+"px",l.close(i.tipsIndex)}e=1}}).on("mouseup",function(t){c.resizeStart&&(c={},o.css("cursor",""),i.scrollPatch()),2===e&&(e=null)}),u.on("click",function(){var a,l=t(this),n=l.find(C),o=n.attr("lay-sort");return n[0]&&1!==e?(a="asc"===o?"desc":"desc"===o?null:"asc",void i.sort(l,a,null,!0)):e=2}).find(C+" .layui-edge ").on("click",function(e){var a=t(this),l=a.index(),n=a.parents("th").eq(0).data("field");layui.stope(e),0===l?i.sort(n,"asc",null,!0):i.sort(n,"desc",null,!0)}),i.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=t(this).prev(),a=i.layBody.find('input[name="layTableCheckbox"]'),l=e.parents("tr").eq(0).data("index"),n=e[0].checked,o="layTableAllChoose"===e.attr("lay-filter");o?(a.each(function(e,t){t.checked=n,i.setCheckData(e,n)}),i.syncCheckAll(),i.renderForm()):(i.setCheckData(l,n),i.syncCheckAll()),layui.event.call(this,s,"checkbox("+h+")",{checked:n,data:d.cache[i.key][l],type:o?"all":"one"})}),i.layBody.on("mouseenter","tr",function(){var e=t(this),a=e.index();i.layBody.find("tr:eq("+a+")").addClass(N)}).on("mouseleave","tr",function(){var e=t(this),a=e.index();i.layBody.find("tr:eq("+a+")").removeClass(N)}),i.layBody.on("change","."+w,function(){var e=t(this),a=this.value,l=e.parent().data("field"),n=e.parents("tr").eq(0).data("index"),o=d.cache[i.key][n];o[l]=a,layui.event.call(this,s,"edit("+h+")",{value:a,data:o,field:l})}).on("blur","."+w,function(){var e,l=t(this),n=l.parent().data("field"),o=l.parents("tr").eq(0).data("index"),r=d.cache[i.key][o];i.eachCols(function(t,a){a.field==n&&a.templet&&(e=a.templet)}),l.siblings(f).html(e?a(t(e).html()||this.value).render(r):this.value),l.parent().data("content",this.value),l.remove()}),i.layBody.on("click","td",function(){var e=t(this),a=(e.data("field"),e.children(f));if(!e.data("off")){if(e.data("edit")){var o=t('<input class="'+w+'">');return o[0].value=e.data("content")||a.text(),e.find("."+w)[0]||e.append(o),o.focus()}Math.round(a.prop("scrollWidth"))>Math.round(a.outerWidth())&&(i.tipsIndex=l.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(a.height()+16)+"px;"+function(){return"sm"===n.size?"padding: 4px 15px; font-size: 12px;":"lg"===n.size?"padding: 14px 15px;":""}()+'">',a.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),a[0],{tips:[3,""],time:-1,anim:-1,maxWidth:r.ios||r.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){l.close(t)})}}))}}),i.layBody.on("click","*[lay-event]",function(){var e=t(this),l=e.parents("tr").eq(0).data("index"),n=i.layBody.find('tr[data-index="'+l+'"]'),o="layui-table-click",r=d.cache[i.key][l];layui.event.call(this,s,"tool("+h+")",{data:d.clearCacheKey(r),event:e.attr("lay-event"),tr:n,del:function(){d.cache[i.key][l]=[],n.remove(),i.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(e,l){if(e in r){var o,d=n.children('td[data-field="'+e+'"]');r[e]=l,i.eachCols(function(t,a){a.field==e&&a.templet&&(o=a.templet)}),d.children(f).html(o?a(t(o).html()||l).render(r):l),d.data("content",l)}})}}),n.addClass(o).siblings("tr").removeClass(o)}),i.layMain.on("scroll",function(){var e=t(this),a=e.scrollLeft(),n=e.scrollTop();i.layHeader.scrollLeft(a),i.layFixed.find(m).scrollTop(n),l.close(i.tipsIndex)}),T.on("resize",function(){i.fullSize(),i.scrollPatch()})},d.init=function(e,a){a=a||{};var i=this,l=t(e?'table[lay-filter="'+e+'"]':u+"[lay-data]"),n="Table element property lay-data configuration item has a syntax error: ";return l.each(function(){var i=t(this),l=i.attr("lay-data");try{l=new Function("return "+l)()}catch(r){o.error(n+l)}var c=[],s=t.extend({elem:this,cols:[],data:[],skin:i.attr("lay-skin"),size:i.attr("lay-size"),even:"string"==typeof i.attr("lay-even")},d.config,a,l);e&&i.hide(),i.find("thead>tr").each(function(e){s.cols[e]=[],t(this).children().each(function(a){var i=t(this),l=i.attr("lay-data");try{l=new Function("return "+l)()}catch(r){return o.error(n+l)}var d=t.extend({title:i.text(),colspan:i.attr("colspan")||0,rowspan:i.attr("rowspan")||0},l);d.colspan<2&&c.push(d),s.cols[e].push(d)})}),i.find("tbody>tr").each(function(e){var a=t(this),i={};a.children("td").each(function(e,a){var l=t(this),n=l.data("field");if(n)return i[n]=l.html()}),layui.each(c,function(e,t){var l=a.children("td").eq(e);i[t.field]=l.html()}),s.data[e]=i}),d.render(s)}),i},d.checkStatus=function(e){var t=0,a=[],i=d.cache[e];return i?(layui.each(i,function(e,i){i[d.config.checkName]&&(t++,a.push(d.clearCacheKey(i)))}),{data:a,isAll:t===i.length}):{}},c.config={},d.reload=function(e,a){var i=c.config[e];return i?d.render(t.extend({},i,a)):o.error("The ID option was not found in the table instance")},d.render=function(e){var t=new S(e);return c.call(t)},d.clearCacheKey=function(e){return e=t.extend({},e),delete e[d.config.checkName],delete e[d.config.indexName],e},d.init(),e(s,d)});